#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Fail if package.json or lock file have uncommitted changes
DIRTY_PKG=$(git diff --name-only -- package.json package-lock.json)
if [ -n "$DIRTY_PKG" ]; then
  echo "ERROR: Uncommitted changes in dependency files:"
  echo "$DIRTY_PKG"
  echo "Commit these before pushing or Netlify build will fail."
  exit 1
fi

echo "üîç Running build check before push..."
npm run build
